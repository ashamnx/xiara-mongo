{"version":3,"sources":["../source/MongoAdapter.ts"],"names":[],"mappings":";;;;;;;;;;;;AACA,2CAA+C;AAG/C;IAAkC,gCAAe;IAGhD,sBAAa,OAA2B;eAEvC,kBAAM,OAAO,CAAC;IACf,CAAC;IAED,gCAAS,GAAT,UAAW,WAAqC;QAAhD,iBAaC;QAXA,IAAI,CAAC,SAAS,EAAE,CAAC,SAAS,CAAC,UAAC,SAAS;YACpC,IAAG,SAAS,EACZ;gBACC,KAAI,CAAC,WAAW,GAAG,EAAE,CAAC;gBACtB,KAAsB,UAAW,EAAX,2BAAW,EAAX,yBAAW,EAAX,IAAW,EACjC;oBADI,IAAI,UAAU,oBAAA;oBAEjB,KAAI,CAAC,cAAc,CAAC,UAAU,CAAC,CAAC;iBAChC;aACD;QACF,CAAC,CAAC,CAAC;IAEJ,CAAC;IAED,qCAAc,GAAd,UAAe,UAAkC;QAEhD,IAAI,MAAM,GAAG,UAAU,CAAC,SAAS,EAAE,CAAC;QACpC,MAAM,CAAC,OAAO,EAAE,CAAC;QACjB,MAAM,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,wCAAwC;QACxE,MAAM,CAAC,gBAAgB,EAAE,CAAC;QAE1B,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IACnC,CAAC;IACF,mBAAC;AAAD,CAhCA,AAgCC,CAhCiC,4BAAe,GAgChD;AAhCY,oCAAY;AAgCxB,CAAC","file":"MongoAdapter.js","sourcesContent":["import { IConnectionOptions } from \"./Utils\";\nimport { MongoConnection } from \"./Connection\";\nimport { ICollection, MongoCollection, MongoSchema } from \"./Definitions\"\n\nexport class MongoAdapter extends MongoConnection\n{\n\tcollections: typeof MongoCollection[];\n\tconstructor( options: IConnectionOptions)\n\t{\n\t\tsuper(options);\n\t}\n\n\tbootstrap( collections: typeof MongoCollection[] )\n\t{\n\t\tthis.OnConnect().subscribe((connected) => {\n\t\t\tif(connected)\n\t\t\t{\n\t\t\t\tthis.collections = [];\n\t\t\t\tfor(let collection of collections)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(collection);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t}\n\n\tinitCollection(collection: typeof MongoCollection)\n\t{\n\t\tlet schema = collection.getSchema();\n\t\tschema.prepare();\n\t\tschema.setConnection(this._db); // Connect the schema with this adapter.\n\t\tschema.createCollection();\n\n\t\tthis.collections.push(collection);\n\t}\n};"]}