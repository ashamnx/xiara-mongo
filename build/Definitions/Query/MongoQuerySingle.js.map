{"version":3,"sources":["../source/Definitions/Query/MongoQuerySingle.ts"],"names":[],"mappings":";;;;;;;;;;;;AACA,2CAA0C;AAG1C;IAAiE,oCAAa;IAA9E;;IA2BA,CAAC;IAzBA,+BAAI,GAAJ,UAAqC,WAAiF,EAAE,UAAmF;QAE1M,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,IAAI,CAAE,WAAW,EAAE,UAAU,CAAE,CAAC;IACpD,CAAC;IAED,gCAAK,GAAL,UAAuB,UAAiF;QAEvG,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;IACtC,CAAC;IAED,+BAAI,GAAJ;QAAA,iBAcC;QAZA,MAAM,CAAC,IAAI,OAAO,CAAK,UAAC,OAAO,EAAE,MAAW;YAC3C,IAAI,KAAK,GAAiB,KAAI,CAAC,UAAU,CAAC,aAAa,EAAE,CAAC,OAAO,CAAC,KAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,UAAC,IAAI;gBACvF,EAAE,CAAA,CAAC,KAAI,CAAC,MAAM,CAAC,CACf,CAAC;oBACA,MAAM,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBACtB,CAAC;gBAED,IAAI,QAAQ,GAAM,KAAI,CAAC,UAAU,CAAC,mBAAmB,CAAS,KAAI,CAAC,UAAU,CAAC,CAAC;gBAC/E,QAAQ,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;gBACvB,OAAO,CAAC,QAAQ,CAAC,CAAC;YACnB,CAAC,CAAC,CAAC,KAAK,CAAE,MAAM,CAAE,CAAC;QACpB,CAAC,CAAC,CAAC;IACJ,CAAC;IACF,uBAAC;AAAD,CA3BA,AA2BC,CA3BgE,uBAAU,GA2B1E;AA3BY,4CAAgB;AA2B5B,CAAC","file":"MongoQuerySingle.js","sourcesContent":["import { Db, Collection } from \"mongodb\";\r\nimport { MongoQuery } from \"./MongoQuery\";\r\nimport { MongoCollection } from \"../MongoCollection\";\r\n\r\nexport class MongoQuerySingle<T extends MongoCollection> extends MongoQuery<T>\r\n{\r\n\tthen<TResult1 = T, TResult2 = never>(onfulfilled?: ((value: T) => TResult1 | PromiseLike<TResult1>) | undefined | null, onrejected?: ((reason: any) => TResult2 | PromiseLike<TResult2>) | undefined | null): Promise<TResult1 | TResult2>\r\n\t{\r\n\t\treturn this.exec().then( onfulfilled, onrejected );\r\n\t}\r\n\r\n\tcatch<TResult = never>(onrejected?: ((reason: any) => TResult | PromiseLike<TResult>) | undefined | null): Promise<T | TResult>\r\n\t{\r\n\t\treturn this.exec().catch(onrejected);\r\n\t}\r\n\r\n\texec(): Promise<T>\r\n\t{\r\n\t\treturn new Promise<T>( (resolve, reject: any) => {\r\n\t\t\tlet query: Promise<any> = this.collection.getCollection().findOne(this.query).then((data) => {\r\n\t\t\t\tif(this.isLean)\r\n\t\t\t\t{\r\n\t\t\t\t\treturn resolve(data);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar instance: T = this.collection.constructCollection<T>(<any>this.collection);\r\n\t\t\t\tinstance.hydrate(data);\r\n\t\t\t\tresolve(instance);\r\n\t\t\t}).catch( reject );\r\n\t\t});\r\n\t}\r\n};"]}